@withdraval
Feature: Регистрация по номеру телефона

    @success
    Scenario Outline: Успешная регистрация по номеру телефона
        Given Открыта главная страница сайта
        And Пользователь с номером телефона "<номер_телефона>" не зарегистрирован в системе
        When Пользователь нажимает на кнопку "Зарегистрироваться"
        And Вводит номер телефона "<номер_телефона>", пароль "<пароль>"
        And Нажимает кнопку "Завершить регистрацию"
        Then Происходит успешная регистрация и автоматическая авторизация
        And Отображается личный кабинет
        Examples:
          | номер_телефона | пароль  |
          | 79161234567    | Qw123!  |
          | 79031112233    | SecUr3  |

    @fail
    Scenario Outline: Неуспешная регистрация
        Given Открыта главная страница сайта
        And Пользователь с номером телефона "<номер_телефона>" зарегистрирован в системе
        When Пользователь нажимает на кнопку "Зарегистрироваться"
		And Вводит номер телефона "<номер_телефона>", пароль "<пароль>"        
		And Нажимает кнопку "Подтвердить"
        Then Отображается сообщение об ошибке "Пользователь с номером <номер_телефона> зарегистрирован в системе"
        And Регистрация не завершена
        Examples:
          | номер_телефона | пароль  |
          | 79161234567    | Qw123!  |
          | 79031112233    | SecUr3  |
		  
	@fail
    Scenario Outline: Неуспешная регистрация
        Given Открыта главная страница сайта
        When Пользователь нажимает на кнопку "Зарегистрироваться"
		And Вводит номер телефона "<номер_телефона>", пароль "<пароль>"        
		And Нажимает кнопку "Подтвердить"
        Then Отображается сообщение об ошибке "Пропущено поле <пропущенное_поле>"
        And Регистрация не завершена
        Examples:
          | номер_телефона | пароль  | пропущенное_поле |
          | 79161234567    |         | Пароль           |
          |                | SecUr3  | Номер телефона   |
    
    @fail
    Scenario Outline: Неуспешная регистрация - неверный формат номера телефона
        Given Открыта главная страница сайта
        When Пользователь нажимает на кнопку "Зарегистрироваться"
        And Вводит номер телефона "<номер_телефона>", пароль "<пароль>"        
        And Нажимает кнопку "Подтвердить"
        Then Отображается сообщение об ошибке "Неверный формат номера телефона"
        And Регистрация не завершена
        Examples:
          | номер_телефона | пароль  |
          | 791612345      | Qw123!  |
          | 791612345678   | Qw123!  |
          | abcdefghijk    | Qw123!  |

    @fail
    Scenario Outline: Неуспешная регистрация - слабый пароль
        Given Открыта главная страница сайта
        When Пользователь нажимает на кнопку "Зарегистрироваться"
        And Вводит номер телефона "<номер_телефона>", пароль "<пароль>"        
        And Нажимает кнопку "Подтвердить"
        Then Отображается сообщение об ошибке "Пароль должен содержать не менее 8 символов, включая цифры и буквы"
        And Регистрация не завершена
        Examples:
          | номер_телефона | пароль |
          | 79161234567    | 123    |
          | 79161234567    | qwe    |
          | 79161234567    | 123qwe |